# コミット管理

## 概要

各フェーズ完了時に適切なフォーマットと Issue 参照を含む意味のあるコミットを作成する。

## 手順

1. コミット準備

   - `git diff` で変更を確認
   - 関連するファイルのみをステージング
     - 必ず GitKraken MCP を使用
     - ツール: `git_add_or_commit` (action: "add", directory: リポジトリパス, files: ファイル配列)
   - ワーキングツリーがクリーンであることを確認

2. コミットメッセージ形式

   - コンベンショナルコミット形式を使用
   - 以下の基本フォーマットに従う

3. フェーズベースのコミット

   - 各フェーズ完了時にコミット
     - 必ず GitKraken MCP を使用
     - ツール: `git_add_or_commit` (action: "commit", directory: リポジトリパス, message: コミットメッセージ)
   - メッセージにフェーズコンテキストを含める
   - Issue 番号を参照

## 基本フォーマット

```
<type>[任意の scope]: <説明>

[任意の本文]
[Issue: #123]
```

### Type 一覧

| Type     | 説明                                                                   |
| -------- | ---------------------------------------------------------------------- |
| feat     | 新機能の追加                                                           |
| fix      | バグ修正                                                               |
| docs     | ドキュメントの更新のみ                                                 |
| style    | コードの意味に影響しない変更（空白、フォーマット、セミコロン追加など） |
| refactor | バグ修正や機能追加ではないコードの変更                                 |
| perf     | パフォーマンス改善のための変更                                         |
| test     | テストの追加・修正                                                     |
| build    | ビルドシステムや外部依存関係に関する変更                               |
| ci       | CI 設定ファイルやスクリプトの変更                                      |
| chore    | その他の変更（ソースやテストの変更を含まない）                         |

### Scope（任意）

- 変更の範囲を示す
- 例： feat(auth), fix(api)

### 説明文のルール

- 必ず日本語で記述
- 変更内容が明確に分かるように
- 文末は体言止め（「〜する」「〜した」ではなく「〜を追加」「〜を修正」）

### イシューの関連付け

- イシュー番号は `Issue: #番号` の形式で記載
- 複数のイシューに関連する場合はカンマ区切りで記載（例：`Issue: #123, #124`）
- クローズするイシューの場合は `Closes #123` の形式も使用可能

## 重大な変更を含む場合

破壊的に変更していることを明示する。

1. Type/Scope の後に!をつける

2. フッターに BREAKING CHANGE:を記載

例：

```md
feat: 認証 API の仕様を変更
BREAKING CHANGE: トークンの形式を変更
```
